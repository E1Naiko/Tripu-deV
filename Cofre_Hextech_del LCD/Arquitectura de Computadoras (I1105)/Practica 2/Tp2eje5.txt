;Lectura de datos desde el teclado.
;El siguiente programa solicita el ingreso de un número (de un dígito) por teclado e inmediatamente lo muestra en la
;pantalla de comandos, haciendo uso de las interrupciones por software INT 6 e INT 7.
  ORG 1000H
    CADENA DB "..."
    FIN DB ?
    MSJ DB "CANTIDAD DE VOCALES",00
    LINEA DB 10
    VOCALES DB "AaEeIiOoUu",00
    CANT DB 0
    
  ORG 1500H
    CHAR DB ?
    
  ORG 3000H
SALTO:
  PUSH BX
  PUSH AX
  MOV BX, OFFSET LINEA
  MOV AL,1
  INT 7
  POP AX
  POP BX
  RET

LEER_CADENA:
  PUSH BX
  PUSH AX
  PUSH CX
  PUSH DX
  MOV DX,BX
lEER:
  CMP CL,0
  JZ FIAN
  MOV BX, OFFSET CHAR
  INT 6
  DEC CL
  MOV BX,DX
  MOV AH, CHAR
  MOV BYTE PTR [BX], AH
  INC DX
  JMP LEER
FIAN:
  POP DX
  POP CX
  POP AX
  POP BX
  RET

ES_VOCAL:
  PUSH AX
  PUSH BX
  PUSH CX
  MOV DH, CL    ; en DH pongo el char correspondiente 
  MOV DL, 0
  MOV BX, OFFSET VOCALES
  MOV AH, 10
LOOP:  
  CMP [BX], DH
  JZ ES
  INC BX
  DEC AH
  CMP AH,0
  JZ FINVOCAL
  JMP LOOP
ES:
  MOV DL,1
FINVOCAL:
  POP CX
  POP BX
  POP AX
  RET

CONTAR_VOC:
  PUSH AX
  PUSH BX
  PUSH CX
  PUSH DX
  MOV DH,AL      ; INICIALIZO CONTADOR DE CADENA
  MOV CH,0      ; INICIALIZO CONTADOR DE VOCALES
LOOP_CVOCAL:
  CMP DH,0
  JZ FIN_CONTADOR
  MOV CL,[BX]
  CALL ES_VOCAL 
  CMP DL,1
  INC BX
  JZ CONTAR
  DEC DH
  JMP LOOP_CVOCAL
CONTAR:
  INC CH
FIN_CONTADOR:
  MOV CANT,CH
  POP DX
  POP CX
  POP BX
  POP AX
  RET

  ORG 2000H
  MOV BX, OFFSET CADENA
  MOV CL, 3
  PUSH BX
  CALL LEER_CADENA
  POP BX
  MOV AL, 3
  INT 7
  CALL CONTAR_VOC
  CALL SALTO
  MOV BX, OFFSET MSJ
  MOV AL, OFFSET FIN-OFFSET MSJ
  INT 7
  CALL SALTO
  MOV BX, OFFSET CANT
  MOV AL,1
  INT 7
  INT 0
  HLT  
  END

