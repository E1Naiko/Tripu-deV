{Realice un programa donde 4 robots colaboren para recoger todas las flores de una esquina indicada por un robot jefe, seleccionada de manera aleatoria dentro del cuadrante (2,2) y (10,10). Para ello el jefe determina inicialmente una esquina y los robots deben accederla, tomar de a una las flores y volver a su posición inicial. Cuando los robots terminan el jefe deberá informar cuál de ellos logró recoger más flores. Las esquinas de inicio de los robots deberán ser jefe (1,1) y robots (2,1), (3, 1), (4,1) y (5,1).}
{}
programa tp4Ej3
areas
  areaG : AreaC(2,2,10,10)
  areaIniJ : AreaP(1,1,1,1)
  areaIni1 : AreaP(2,1,2,1)
  areaIni2 : AreaP(3,1,3,1)
  areaIni3 : AreaP(4,1,4,1)
  areaIni4 : AreaP(5,1,5,1)
robots
  robot tipoFlorero
  variables
    id : numero
    seguir : boolean
    avenida : numero
    calle : numero
    avIni: numero
    cont : numero
  comenzar
    cont := 0
    avIni := PosAv
    RecibirMensaje(id, robotJ)
    RecibirMensaje(avenida, robotJ)
    RecibirMensaje(calle, robotJ)
    RecibirMensaje(seguir, robotJ)
    mientras (seguir)
      { ---- Inicio recorrido ---- }
      Pos(avenida, calle)
      si (HayFlorEnLaEsquina)
        tomarFlor
        EnviarMensaje(V, robotJ)
      sino
        EnviarMensaje(F, robotJ)
      { ---- Vuelta a inicio ---- }
      Pos(avIni, 1)
      { ---- Comunico termine ---- }
      RecibirMensaje(seguir, robotJ)
    {}
    { ---- Envio Resultado ---- }
  fin 
  robot tipoJefe
  variables
    actual : numero
    avenidaRandom : numero
    calleRandom : numero
    continuo : boolean
  comenzar
    continuo := V
    Random(avenidaRandom,2,10)
    Random(calleRandom,2,10)
    { ---- Inicializo los floreros ---- }
    EnviarMensaje(1, robot1)
    EnviarMensaje(avenidaRandom, robot1)
    EnviarMensaje(calleRandom, robot1)
    EnviarMensaje(2, robot2)
    EnviarMensaje(avenidaRandom, robot2)
    EnviarMensaje(calleRandom, robot2)
    EnviarMensaje(3, robot3)
    EnviarMensaje(avenidaRandom, robot3)
    EnviarMensaje(calleRandom, robot3)
    EnviarMensaje(4, robot4)
    EnviarMensaje(avenidaRandom, robot4)
    EnviarMensaje(calleRandom, robot4)
    { ---- Recorrido ---- }
    mientras(continuo)
      Random(actual,1,4)
      si (actual=1)
        EnviarMensaje(V, robot1)
      sino
        si (actual=2)
          EnviarMensaje(V, robot2)
        sino
          si (actual=3)
            EnviarMensaje(V, robot3)
          sino
            EnviarMensaje(V, robot4)
      RecibirMensaje(continuo, *)
    { ---- Fin recorrido ---- }
    EnviarMensaje(F, robot1)
    EnviarMensaje(F, robot2)
    EnviarMensaje(F, robot3)
    EnviarMensaje(F, robot4)
  fin
variables
  robot1: tipoFlorero
  robot2: tipoFlorero
  robot3: tipoFlorero
  robot4: tipoFlorero
  robotJ: tipoJefe
comenzar
  AsignarArea(robotJ,areaIniJ)
  AsignarArea(robot1,areaIni1)
  AsignarArea(robot2,areaIni2)
  AsignarArea(robot3,areaIni3)
  AsignarArea(robot4,areaIni4)
  AsignarArea(robot1,areaG)
  AsignarArea(robot2,areaG)
  AsignarArea(robot3,areaG)
  AsignarArea(robot4,areaG)
  Iniciar(robotJ, 1, 1)
  Iniciar(robot1, 2, 1)
  Iniciar(robot2, 3, 1)
  Iniciar(robot3, 4, 1)
  Iniciar(robot4, 5, 1)
fin
fin